{
  "entities": {
    "User": {
      "title": "User",
      "type": "object",
      "description": "Represents a user of the SmartGas Guardian system.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the user (Firebase Auth UID)."
        },
        "email": {
          "type": "string",
          "description": "User's email address.",
          "format": "email"
        },
        "createdAt": {
          "type": "string",
          "description": "Timestamp indicating when the user account was created.",
          "format": "date-time"
        }
      },
      "required": [
        "id",
        "email",
        "createdAt"
      ]
    },
    "Device": {
      "title": "Device",
      "type": "object",
      "description": "Represents a SmartGas Hub device.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the device."
        },
        "macAddress": {
          "type": "string",
          "description": "MAC address of the device (unique identifier)."
        },
        "deviceName": {
          "type": "string",
          "description": "User-defined name for the device."
        },
        "wifiSsid": {
          "type": "string",
          "description": "WiFi SSID the device is connected to."
        },
        "email": {
          "type": "string",
          "description": "Email address associated with the user account.",
          "format": "email"
        },
        "createdAt": {
          "type": "string",
          "description": "Timestamp indicating when the device was registered.",
          "format": "date-time"
        },
        "updatedAt": {
          "type": "string",
          "description": "Timestamp indicating when the device was last updated.",
          "format": "date-time"
        },
        "isActive": {
          "type": "boolean",
          "description": "Indicates if the device is active and monitoring."
        },
        "userId": {
          "type": "string",
          "description": "The ID of the user who owns this device."
        }
      },
      "required": [
        "macAddress",
        "deviceName",
        "createdAt",
        "updatedAt",
        "isActive",
        "userId"
      ]
    },
    "Alert": {
      "title": "Alert",
      "type": "object",
      "description": "Represents an alert generated by a device.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the alert."
        },
        "deviceId": {
          "type": "string",
          "description": "Reference to the Device."
        },
        "alertType": {
          "type": "string",
          "enum": ["gas_emergency", "gas_warning", "gas_normal"],
          "description": "Type of alert (e.g., gas_emergency, gas_warning, gas_normal)."
        },
        "message": {
          "type": "string",
          "description": "Detailed message describing the alert."
        },
        "sensorData": {
          "type": "string",
          "description": "JSON object containing sensor data related to the alert."
        },
        "createdAt": {
          "type": "string",
          "description": "Timestamp indicating when the alert was generated.",
          "format": "date-time"
        },
        "userId": {
          "type": "string",
          "description": "The ID of the user who owns the device that generated this alert. Used for security rules."
        }
      },
      "required": [
        "deviceId",
        "alertType",
        "message",
        "createdAt",
        "userId"
      ]
    }
  },
  "auth": {
    "providers": [
      "password"
    ]
  },
  "firestore": {
    "collections": [
      {
        "path": "/users/{userId}",
        "schema": { "$ref": "#/entities/User" },
        "description": "Stores user profile information. The document ID is the user's UID from Firebase Authentication.",
        "collections": [
          {
            "path": "devices",
            "schema": { "$ref": "#/entities/Device" },
            "description": "A subcollection containing the devices owned by the user.",
            "collections": [
              {
                "path": "alerts",
                "schema": { "$ref": "#/entities/Alert" },
                "description": "A subcollection containing alerts for a specific device."
              }
            ]
          }
        ]
      }
    ]
  }
}
